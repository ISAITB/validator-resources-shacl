# baseURI: http://www.w3.org/ns/shacl-shacl#

# A SHACL shapes graph to validate Best Practices on SHACL shapes graphs
# Draft last edited 2020-03-12

@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .

@prefix bpsh: <http://itb.ec.europa.eu/ns/shacl-shacl-bp#> .

bpsh:LanguageTagShape			# text-language
	a sh:NodeShape ;
	sh:targetSubjectsOf sh:description, sh:name, sh:message ;
	
	sh:property [
		sh:path sh:description ;				
		sh:message "Both sh:name and sh:description may have multiple values, but should only have one value per language tag.";
		sh:uniqueLang true ;	
		sh:severity sh:Warning ;
	] ;
	
	sh:property [
		sh:path sh:name ;				
		sh:message "Both sh:name and sh:description may have multiple values, but should only have one value per language tag.";
		sh:uniqueLang true ;
		sh:severity sh:Warning ;
	] ;
	
	sh:property [
		sh:path sh:message ;				
		sh:message "A shape should not have more than one value for sh:message with the same language tag.";
		sh:uniqueLang true ;
		sh:severity sh:Warning ;
	] .
	
bpsh:MessageShape				# message
	a sh:NodeShape ;
	sh:targetClass sh:NodeShape ;
	sh:targetClass sh:PropertyShape ;
	
	sh:message "A shape should have at least one value for sh:message in the shapes graph, then all validation results produced as a result of the shape will have exactly these messages as their value of sh:resultMessage." ;
	sh:severity sh:Warning ;
		
	sh:or (
		[
			sh:property [
				sh:path sh:message ;
				sh:minCount 1 ;
			]
		]
		[
			sh:property [
				sh:path (sh:property sh:message) ;
				sh:minCount 1 ;
			] 
		]
		[
			sh:property [
				sh:path (sh:qualifiedValueShape sh:message) ;
				sh:minCount 1 ;
			] 
		]
		[
			sh:property [
				sh:path (sh:property sh:node) ;
				sh:minCount 1 ;
			] 
		]
	)  .

